<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 

<mapper namespace="ProfessorMapper"> 
    <!-- Beans 클래스의 객체이름(id)과 클래스이름(type)을 명시한다. --> 
    <resultMap type="kr.jinju.models.Professor" id="professor"> 
        <!-- Beans의 멤버변수(property)이름과 대상 테이블의 컬럼(column)을 연결한다. --> 
        <result property="profNo" column="profno" /> 
        <result property="name" column="name" /> 
        <result property="userId" column="userid" /> 
        <result property="position" column="position" /> 
        <result property="sal" column="sal" /> 
        <result property="hireDate" column="hiredate" /> 
        <result property="comm" column="comm" /> 
        <result property="deptNo" column="deptno" /> 
    </resultMap> 

    <!-- 데이터 저장을 위한 기능 정의 --> 
    <insert id="insert" 
        parameterType="kr.jinju.models.Professor" 
        useGeneratedKeys="true" 
        keyProperty="profNo"> 
        INSERT INTO professor (name, userid, position, sal, hiredate, comm, deptno) VALUES (#{name}, #{userId}, #{position}, #{sal}, #{hireDate}, #{comm}, #{deptNo});
    </insert>

    <!-- 데이터 삭제를 위한 기능 정의 --> 
    <delete id="delete" 
        parameterType="kr.jinju.models.Professor"> 
        DELETE FROM professor WHERE profno=#{profNo};
    </delete> 

    <!-- 데이터 갱신을 위한 기능 정의 --> 
    <update id="update" 
        parameterType="kr.jinju.models.Professor"> 
        UPDATE professor SET name=#{name}, userid=#{userId}, position=#{position}, sal=#{sal}, hiredate=#{hireDate}, comm=#{comm}, deptno=#{deptNo} WHERE profno=#{profNo};
    </update> 

    <!-- 단일행 조회를 위한 기능 정의 --> 
    <select id="selectItem" 
        parameterType="kr.jinju.models.Professor" 
        resultMap="professor"> 
        SELECT profno, name, userid, position, sal, hiredate, comm, deptno FROM professor WHERE profno=#{profNo};
    </select> 

    <!-- 다중행 조회를 위한 기능 정의 --> 
    <select id="selectList" 
        resultMap="professor"> 
        SELECT profno, name, userid, position, sal, hiredate, comm, deptno FROM professor;
    </select>


    <!-- 추가 -->


    <!-- 특정 학과에 소속된 모든 교수의 삭제를 위한 기능 정의 --> 
    <delete id="deleteByDeptNo" 
        parameterType="kr.jinju.models.Professor"> 
        DELETE FROM professor WHERE deptno=#{deptNo};
    </delete> 
</mapper>